clear all
 close all
% [DatosPlots, directorio] = uigetfile('*mat', 'Escoja el fichero de datos digitalizados a procesar');
% load (cat(2, directorio, DatosPlots)); % los datos de plots
load('./muestras/C1_2017.mat');

canal1=Data.Channel1;
canal1=double(canal1);

canal2=Data.Channel2;
canal2=double(canal2);

celdasAz=Data.SegmentCount;
celdasDis=Data.RecordLength;
bits=Data.Resolution;
escala=Data.Escala;
tau=Data.Tau;
rpm=Data.Rpm;
PRF=Data.PRF;
fs=Data.SampleFrequency;

cargaPintaOrtofoto

Xo=ortofoto.PosicionRadar(1);
Yo=ortofoto.PosicionRadar(2);
% Calculo de la Matriz Radar 

figure(4)
%polarPcolor(r,theta,-canal1,'Ncircles',5,'Nspokes',17, 'labelR', 'Distancia (m)')
r = linspace(0,escala*1852,length(canal1(:,1)));
theta = pi*(linspace(-1,1,length(canal1(1,:))));
r = geocradius(lambda)
X = r'*cos(theta)+ortofoto.PosicionRadar(1);
Y = r'*sin(theta)+ortofoto.PosicionRadar(2);
C = -canal1;
h=pcolor(X,Y,C);
axis equal;
set(h, 'EdgeColor', 'none');


hold on

% Incluir la representación PPI

%hold
h_ortofoto=mapshow(ortofoto.foto(:,:,1:fin),color,ortofoto.R, alfa{:}, 'DisplayType', 'image');
radar_h=plot(ortofoto.PosicionRadar(1), ortofoto.PosicionRadar(2),'r+','MarkerSize',10);
axis tight equal

hold on

